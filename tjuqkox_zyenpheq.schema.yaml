# Rime schema
# encoding: utf-8

schema:
  schema_id: tjuqkox_zyenpheq
  name: ä¸­å¤æ¼¢èªå…¨æ‹¼
  version: "2022.02"
  author:
    - ç«¹å®¢ <tiukha@foxmail.com>
  description: |
    ä¸­å¤æ¼¢èªæ‹¼éŸ³Polyhedron-Tiukhaæ–¹æ¡ˆ
    åŸºæ–¼ã€Œå¤éŸ»ç¾…é¦¬å­—ã€Polyhedronä¸­å¤æ¼¢èªæ‹¼éŸ³æ–¹æ¡ˆ
    http://zh.wikipedia.org/wiki/User:Polyhedron/ä¸­å¤æ¼¢èªæ‹¼éŸ³
    Polyhedron-Tiukhaæ–¹æ¡ˆå¹³å‡æ‹¼éŸ³é•·åº¦ç´„3.79
    Polyhedronæ–¹æ¡ˆå¹³å‡æ‹¼éŸ³é•·åº¦ç´„4.19
    é–‹å•“æ‰€æœ‰å®¹éŒ¯å¾Œå¹³å‡æ‹¼éŸ³é•·åº¦ç´„3.22ï¼Œä½†å¤§é‡ç°¡æ‹¼éœ€åŠ åˆ†éš”ç¬¦
    è¦ªæ¸¬é‚„æ˜¯ä¸‰æ‹¼æ–¹æ¡ˆå¥½ç”¨
  dependencies:
    - luna_pinyin
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_suggestion
    states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@luna_pinyin
    - affix_segmentor@stroke
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - script_translator@luna_pinyin
    - table_translator@stroke
  filters:
    - simplifier
    - simplifier@emoji_suggestion
    - uniquifier
    - reverse_lookup_filter@tjuqkox_zyenpheq_reverse_lookup

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  delimiter: " f"      #åˆ†éš”ç¬¦
  algebra:
    - "xform/'//"       #ä¾‹å¤–éŸ³

    - derive/([ae])j/$1i/                # æ¬¡å…¥éŸµå®¹éŒ¯ -j -> -i

    #ç°¡æ‹¼ï¼Œè€ƒæ…®å®¹éŒ¯ï¼Œè¼ƒå¤šç°¡æ‹¼éœ€åŠ åˆ†éš”ç¬¦
    - abbrev/^([a-z]).+$/$1/       # é¦–å­—æ¯ç°¡æ‹¼
    - abbrev/^([ptkc]h).+$/$1/        # é¦–2å­—æ¯ç°¡æ‹¼

    #æ¬¡å…¥éŸ»å®¹éŒ¯
    - derive/([urv])aj/$1y/                # æ³°åˆéŸ»å¤¬éŸ»å®¹éŒ¯ aj -> yï¼Œæ³°é–‹éŸ»é™¤å¤–
    - derive/([iyw])ej/$1y/                # ç¥­éŸ»å®¹éŒ¯ ej -> yï¼ŒBé¡é–‹å£é™¤å¤–
    - derive/^(.+)jej/$1jy/                # ç¥­éŸ»Bé¡é–‹å£å®¹éŒ¯ ej -> yï¼Œå½±æ¯é™¤å¤–
    - derive/([iy])aj/yj/                # å»¢éŸ»å®¹éŒ¯ aj -> yj
    - derive/([iy])aj/yi/                # å»¢éŸ»å®¹éŒ¯ aj -> yi

    #ä¸€ç­‰å®¹éŒ¯
    - derive/uo(i|n|t)/u$1/                # ç°éŸ»é­‚éŸ»æ²’éŸ»å®¹éŒ¯ uo -> u 

    #äºŒç­‰å®¹éŒ¯
    - derive/([rv])e(i|m|n|q|p|t|k)/$1$2/                # çš†éŸ»å’¸éŸ»å±±éŸ»è€•éŸ»æ´½éŸ»é» éŸ»éº¥éŸ»å®¹éŒ¯ e -> ï¼Œåƒ…reixå”‰æŒ¨ä¸¤å­—èˆ‡rix8å­—é‡
    - derive/rau/ru/                # è‚´éŸ»å®¹éŒ¯ rau -> ru

    #ä¸‰ç­‰å®¹éŒ¯
    - derive/^(.+)ioi/$1ji/                # å¾®éŸ»é–‹å£å®¹éŒ¯ ioi -> wiï¼Œå½±æ¯é™¤å¤–
    - derive/ioix/jix/                # å¾®éŸ»é–‹å£å½±æ¯ä¸Šè²å®¹éŒ¯ ioix -> jix
    - derive/(?<![w])yoi/wi/                # å¾®éŸ»åˆå£å®¹éŒ¯ yoi -> yiï¼Œäº‘æ¯é™¤å¤–
    - derive/wyoi/wyi/                # å¾®éŸ»åˆå£äº‘æ¯å®¹éŒ¯ ioi -> wi
    - derive/ia(m|p)/i$1/                # åš´éŸ»æ¥­éŸ»å®¹éŒ¯ ia -> iï¼Œjiapæ®œğ©±ä¸¤å­—èˆ‡jipç† å­´ä¸¤å­—é‡ï¼Œiamé†ƒè…Œä¸¤å­—èˆ‡imæ„”éŸ¾ä¸¤å­—é‡ï¼Œiap16å­—èˆ‡ipæŒ¹æ–ä¸¤å­—é‡ï¼Œkhiamxæ¬¦ä‡œğ©’¥ä¸‰å­—èˆ‡khimxå…ä¸€å­—é‡
    - derive/([yw])uq/$1q/                # é¾éŸ»å®¹éŒ¯ uq -> q

    #é–‹åˆå®¹éŒ¯
    - derive/ra(u|m|p)/v$1/                # è‚´éŸ»éŠœéŸ»ç‹éŸ»å®¹éŒ¯ ra -> v
    - derive/ie(u|m|p)/y$1/                # å®µéŸ»é¹½éŸ»è‘‰éŸ»Aé¡å®¹éŒ¯ ie -> y
    - derive/je(u|m|p)/w$1/                # å®µéŸ»é¹½éŸ»è‘‰éŸ»Bé¡å®¹éŒ¯ je -> w

    #éŸ»æ¯å®¹éŒ¯
    - derive/^(.+)o(m|p)/$1$2/                # è¦ƒéŸ»åˆéŸ»å®¹éŒ¯ o -> 
    - derive/^(.+)ua(n|t)/$1$2/                # æ¡“éŸ»æœ«éŸ»å®¹éŒ¯ ua -> 
    - derive/^(.+)uu(q|k)/$1$2/                # å†¬éŸ»æ²ƒéŸ»å®¹éŒ¯ uu ->  

    #éŸ»ç­‰å®¹éŒ¯
    - derive/([yw])a(m|p)/u$2/                # å‡¡éŸ»ä¹éŸ»å®¹éŒ¯ a ->  

    #éŸ»å°¾è²èª¿å®¹éŒ¯
    - derive/ex/f/                # å®¹éŒ¯ ex -> f
    - derive/^(.+)eh/$1l/                # å®¹éŒ¯ eh -> l

    - derive/ix/r/                # å®¹éŒ¯ ix -> r
    - derive/^(.+)ux/$1v/                # å®¹éŒ¯ ux -> v

    - derive/^(.+)mx/$1c/                # å®¹éŒ¯ mx -> c
    - derive/^(.+)nx/$1z/                # å®¹éŒ¯ nx -> z
    - derive/^(.+)qx/$1s/                # å®¹éŒ¯ qx -> s

    - derive/([aeouij])ih/$1j/                # å®¹éŒ¯ ih -> j
    - derive/([aeouij])uh/$1w/              # å®¹éŒ¯ uh -> w

    - derive/^(.+)mh/$1b/                # å®¹éŒ¯ mh -> b
    - derive/^(.+)nh/$1d/                # å®¹éŒ¯ nh -> d
    - derive/^(.+)qh/$1g/                # å®¹éŒ¯ qh -> g

translator:
  dictionary: tjuqkox_zyenpheq
  spelling_hints: 8
  preedit_format:
    - "xform/f/ /"       #åˆ†éš”ç¬¦

luna_pinyin:
  tag: luna_pinyin
  dictionary: luna_pinyin
  prefix: "f"
  suffix: "`"
  tips: ã€”æ™®é€šè©±ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/

stroke:
  tag: stroke
  dictionary: stroke
  prefix: "`"
  suffix: "f"
  tips: ã€”ç­†ç•«ã€•
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/

tjuqkox_zyenpheq_reverse_lookup:
  tags: [ luna_pinyin, stroke ]
  overwrite_comment: false
  dictionary: tjuqkox_zyenpheq

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

menu:
  page_size: 10

punctuator:
  import_preset: symbols # å¥è®€è™•ç†å™¨ï¼Œçµ±ä¸€å¾å¤–éƒ¨å°å…¥

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[a-z]+)$"
    luna_pinyin: "^f[a-z']*`?$"
    stroke: "^`[hspnz]*f?$"
