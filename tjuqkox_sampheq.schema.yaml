# Rime schema
# encoding: utf-8

schema:
  schema_id: tjuqkox_sampheq
  name: ä¸­å¤æ¼¢èªä¸‰æ‹¼
  version: "2022.02"
  author:
    - ç«¹å®¢ <tiukha@foxmail.com>
  description: |
    ä¸­å¤æ¼¢èªæ‹¼éŸ³Polyhedron-Tiukhaæ–¹æ¡ˆ
    åŸºæ–¼ã€Œå¤éŸ»ç¾…é¦¬å­—ã€Polyhedronä¸­å¤æ¼¢èªæ‹¼éŸ³æ–¹æ¡ˆ
    http://zh.wikipedia.org/wiki/User:Polyhedron/ä¸­å¤æ¼¢èªæ‹¼éŸ³
  dependencies:
    - luna_pinyin
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_suggestion
    states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@luna_pinyin
    - affix_segmentor@stroke
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - script_translator@luna_pinyin
    - table_translator@stroke
  filters:
    - simplifier
    - simplifier@emoji_suggestion
    - uniquifier
    - reverse_lookup_filter@tjuqkox_sampheq_reverse_lookup

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  delimiter: " '"
  algebra:
# ä¾‹å¤–éŸ³
    - "xform/'//"       

#éµç›¤å¯ä»¥ä»»æ„DIYï¼Œä½†æ³¨æ„xformé †åº
# ç¬¬ä¸€å­—æ¯ - è²æ¯
    # Pçµ„ O - ph
    - xform/^m/M/
    - xform/^b/B/ 
    - xform/^ph/O/
    - xform/^p/P/
    # Tçµ„ Y - th
    - xform/^n/N/
    - xform/^d/D/
    - xform/^th/Y/
    - xform/^t/T/
    # Kçµ„ I - kh
    - xform/^q/Q/
    - xform/^g/G/
    - xform/^kh/I/
    - xform/^k/K/
    # Cçµ„ U - ch
    - xform/^r(i|y|j|w)/R$1/
    - xform/^s/S/
    - xform/^z/Z/
    - xform/^ch/U/
    - xform/^c/C/
    # Xçµ„
    - xform/^x/X/
    - xform/^v(i|y)/V$1/
    # Lçµ„ 
    - xform/^l/L/
    # Jçµ„
    - xform/^j(i|y)/J$1/
    # Hçµ„ E - 0 
    - xform/^h/H/
    - xform/^w(i|y)/W$1/
    - xform/^([aeourviyjw])/E$1/

# ä¾¯éŸ»å…ƒéŸ³ç‚º o
    - xform/([A-Z])u$/$1ou/
    - xform/([A-Z])u(x|h)/$1ou$2/

# æ±ä¸€å…ƒéŸ³ç‚º O
    - xform/([A-Z])u(q|k)/$1Ou$2/

# è„‚éŸ»éŸ»å°¾ç‚º 0
    - xform/([A-Z])([iyjw])h$/$1$2Q/
    - xform/([A-Z])([iyjw])x$/$1$2A/
    - xform/([A-Z])([iyjw])$/$1$2Z/

# ç¬¬ä¸‰å­—æ¯éŸ»å°¾è²èª¿
  #é™°è²éŸ»
    #å¹³è² X C - i u
    - xform/i$/X/
    - xform/u$/C/
    #ä¸Šè² S D - ix ux
    - xform/ix$/S/
    - xform/ux$/D/
    #å»è² W E - ih/j uh
    - xform/ih$/W/
    - xform/j$/W/
    - xform/uh$/E/
  #é™½è²éŸ»
    #å¹³è² M N B V - m n q uq
    - xform/uq$/V/
    - xform/q$/B/
    - xform/n$/N/
    - xform/m$/M/
    #ä¸Šè² K J H G - mx nx qx uqx
    - xform/uqx$/G/
    - xform/qx$/H/
    - xform/nx$/J/
    - xform/mx$/K/
    #å»è² O I U Y - mh nh qh uqh
    - xform/uqh$/Y/
    - xform/qh$/U/
    - xform/nh$/I/
    - xform/mh$/O/
  #å…¥è²éŸ» P T R F - p t k uk
    - xform/uk$/F/
    - xform/k$/R/
    - xform/t$/T/
    - xform/p$/P/
  #ç„¡éŸ»å°¾ Z A Q -0 x h
    - xform/h$/Q/
    - xform/x$/A/
    - xform/([a-z])$/$1Z/

# ç¬¬äºŒå­—æ¯ä»‹éŸ³å…ƒéŸ³
  #åˆå£
    #aå…ƒéŸ³ K J H G - ua ya wa va
    - xform/va/G/
    - xform/wa/H/
    - xform/ya/J/
    - xform/ua/K/
    #eå…ƒéŸ³ Y U I O - ue ye we ve
    - xform/ve/Y/
    - xform/we/U/
    - xform/ye/I/
    - xform/ue/O/
    #oå…ƒéŸ³ M N B - uo yo wo
    - xform/wo/B/
    - xform/yo/N/
    - xform/uo/M/
    #iå…ƒéŸ³ P L - y w
    - xform/y/P/
    - xform/w/L/
  #é–‹å£
    #aå…ƒéŸ³ A S D F - a ia ja ra
    - xform/ra/F/
    - xform/ja/D/
    - xform/ia/S/
    - xform/a/A/
    #eå…ƒéŸ³ Q W E R - e ie je re
    - xform/re/R/
    - xform/je/E/
    - xform/ie/W/
    - xform/e/Q/
    #oå…ƒéŸ³ Z X C - o io jo
    - xform/jo/C/
    - xform/io/X/
    - xform/o/Z/
    #iå…ƒéŸ³ t v - i j
    - xform/i/T/
    - xform/j/V/

#å…¨éƒ¨è½‰çˆ²å°å¯«
    - xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/

# é€šæ±Ÿæ”å…ƒéŸ³
    #ä¸€ç­‰ æ±ä¸€ å†¬ - O U
    #äºŒç­‰ æ±Ÿ - R
    #ä¸‰ç­‰Aé¡ æ±ä¸‰ é¾ - I Y
    - xform/t(v|h|u|f)$/i$1/
    - xform/p(v|h|u|f)$/y$1/
    #ä¸‰ç­‰Bé¡ æ±ä¸‰ é¾ - J W
    - xform/v(v|h|u|f)$/j$1/
    - xform/g(v|h|u|f)$/w$1/

#ç°¡æ‹¼
    - abbrev/^([a-z]).+$/$1/

translator:
  dictionary: tjuqkox_zyenpheq
  spelling_hints: 8
  prism: tjuqkox_sampheq
  preedit_format:    
# ç¬¬ä¸‰å­—æ¯éŸ»å°¾è²èª¿
  #é™°è²éŸ»
    #å¹³è² Z X C - 0 i u
    - xform/(\w\w)z/$1/
    - xform/(\w\w)x/$1I/
    - xform/(\w\w)c/$1U/
    #ä¸Šè²  A S D - x ix ux
    - xform/(\w\w)a/$1X/
    - xform/(\w\w)s/$1IX/
    - xform/(\w\w)d/$1UX/
    #å»è²  Q W E - h ih uh
    - xform/(\w\w)q/$1H/
    - xform/(\w\w)w/$1IH/  
    - xform/(\w\w)e/$1UH/
  #é™½è²éŸ»
    #å¹³è² M N B V - m n q uq
    - xform/(\w\w)m/$1M/
    - xform/(\w\w)n/$1N/
    - xform/(\w\w)b/$1Q/
    - xform/(\w\w)v/$1UQ/
    #ä¸Šè² K J H G - mx nx qx uqx
    - xform/(\w\w)k/$1MX/
    - xform/(\w\w)j/$1NX/
    - xform/(\w\w)h/$1QX/
    - xform/(\w\w)g/$1UQX/
    #å»è² O I U Y - mh nh qh uqh
    - xform/(\w\w)o/$1MH/
    - xform/(\w\w)i/$1NH/
    - xform/(\w\w)u/$1QH/
    - xform/(\w\w)y/$1UQH/
  #å…¥è²éŸ» P T R F - p t k uk
    - xform/(\w\w)p/$1P/
    - xform/(\w\w)t/$1T/
    - xform/(\w\w)r/$1K/
    - xform/(\w\w)f/$1UK/

# ç¬¬äºŒå­—æ¯ä»‹éŸ³å…ƒéŸ³
  #é–‹å£
    #aå…ƒéŸ³ A S D F - a ia ja ra
    - xform/(\w)a/$1A/
    - xform/(\w)s/$1IA/
    - xform/(\w)d/$1JA/
    - xform/(\w)f/$1RA/
    #eå…ƒéŸ³ Q W E R - e ie je re
    - xform/(\w)q/$1E/
    - xform/(\w)w/$1IE/
    - xform/(\w)e/$1JE/
    - xform/(\w)r/$1RE/
    #oå…ƒéŸ³ Z X C - o io jo
    - xform/(\w)z/$1O/
    - xform/(\w)x/$1IO/
    - xform/(\w)c/$1JO/
    #iå…ƒéŸ³ T V - i j
    - xform/(\w)t/$1I/
    - xform/(\w)v/$1J/
  #åˆå£
    #aå…ƒéŸ³ K J H G - ua ya wa va
    - xform/(\w)k/$1UA/
    - xform/(\w)j/$1YA/
    - xform/(\w)h/$1WA/
    - xform/(\w)g/$1VA/
    #eå…ƒéŸ³ O I U Y - ue ye we ve
    - xform/(\w)o/$1UE/
    - xform/(\w)i/$1YE/
    - xform/(\w)u/$1WE/
    - xform/(\w)y/$1VE/
    #oå…ƒéŸ³ M N B - uo yo wo
    - xform/(\w)m/$1UO/
    - xform/(\w)n/$1YO/
    - xform/(\w)b/$1WO/
    #iå…ƒéŸ³ P L - y w
    - xform/(\w)p/$1Y/
    - xform/(\w)l/$1W/

# ç¬¬ä¸€å­—æ¯ - è²æ¯
    # Pçµ„ O - ph
    - "xform/(^|[ '])p/$1P/"
    - "xform/(^|[ '])o/$1PH/"
    - "xform/(^|[ '])b/$1B/"
    - "xform/(^|[ '])m/$1M/"
    # Tçµ„ Y - th
    - "xform/(^|[ '])t/$1T/"
    - "xform/(^|[ '])y/$1TH/"
    - "xform/(^|[ '])d/$1D/"
    - "xform/(^|[ '])n/$1N/"
    # Kçµ„ I - kh
    - "xform/(^|[ '])k/$1K/"
    - "xform/(^|[ '])i/$1KH/"
    - "xform/(^|[ '])g/$1G/"
    - "xform/(^|[ '])q/$1Q/"
    # Cçµ„ U - ch
    - "xform/(^|[ '])c/$1C/"
    - "xform/(^|[ '])u/$1CH/"
    - "xform/(^|[ '])z/$1Z/"
    - "xform/(^|[ '])s/$1S/"
    - "xform/(^|[ '])r/$1R/"
    # Xçµ„
    - "xform/(^|[ '])x/$1X/"
    - "xform/(^|[ '])v/$1V/"
    # Lçµ„
    - "xform/(^|[ '])l/$1L/"
    # Jçµ„
    - "xform/(^|[ '])j/$1J/"
    # Hçµ„ E - 0
    - "xform/(^|[ '])e/$1 /"
    - "xform/(^|[ '])h/$1H/"
    - "xform/(^|[ '])w/$1W/"

#å…¨éƒ¨è½‰çˆ²å°å¯«
    - xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/  

# ä¾¯éŸ»å…ƒéŸ³ç‚º o
    - xform/ou/u/

# æ¬¡å…¥éŸ»éŸ»å°¾ç‚º j
    - xform/aih/aj/
    - xform/([iyjw])eih/$1ej/

# é€šæ±Ÿæ”å…ƒéŸ³
  #ä¸€ç­‰ æ±ä¸€ å†¬ - o u
    - xform/ueu/u/
    - xform/weu/uu/
    #äºŒç­‰ æ±Ÿ -r
    - xform/reu/ru/
    #ä¸‰ç­‰Aé¡ æ±ä¸‰ é¾ - i y
    - xform/yeu/iu/
    - xform/veu/yu/
    #ä¸‰ç­‰Bé¡ æ±ä¸‰ é¾ - j w
    - xform/yau/ju/
    - xform/ieu(q|k)/wu$1/

luna_pinyin:
  tag: luna_pinyin
  dictionary: luna_pinyin
  prefix: "f"
  suffix: "`"
  tips: ã€”æ™®é€šè©±ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/

stroke:
  tag: stroke
  dictionary: stroke
  prefix: "a"
  suffix: "`"
  tips: ã€”ç­†ç•«ã€•
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/

tjuqkox_sampheq_reverse_lookup:
  tags: [ luna_pinyin, stroke ]
  overwrite_comment: false
  dictionary: tjuqkox_zyenpheq

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

menu:
  page_size: 10

punctuator:
  import_preset: symbols # å¥è®€è™•ç†å™¨ï¼Œçµ±ä¸€å¾å¤–éƒ¨å°å…¥

key_binder:
  import_preset: default # å¿«æ·éµï¼Œçµ±ä¸€å¾å¤–éƒ¨å°å…¥

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[a-z]+)$"
    luna_pinyin: "^f[a-z']*`?$"
    stroke: "^a[hspnz]*`?$"
